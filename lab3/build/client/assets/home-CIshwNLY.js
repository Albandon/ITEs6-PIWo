import{d as F,f as S,c as B,a as L,u as A,w as z}from"./firebase-CtYfjOcE.js";import{a as i,o as e}from"./chunk-BAXFHI7N-DRA5_ntC.js";import{a as N}from"./BooksContext-BILn8W5C.js";function D({book:s,onEdit:h,onDelete:l}){const{user:c}=i.useContext(N),o=async()=>{const r=F(S,"books",s.id);await B(r),l&&l()};return e.jsxs("div",{className:"book-item",children:[e.jsx("div",{className:"book-cover-image",children:s.cover&&e.jsx("img",{src:s.cover,alt:"Okładka",style:{maxWidth:120}})}),e.jsxs("div",{className:"book-information-main",children:[e.jsx("h3",{className:"book-title",children:s.title}),e.jsxs("p",{className:"book-author",children:["Autor: ",s.author]}),e.jsx("p",{className:"book-description",children:s.description})]}),e.jsxs("div",{className:"book-information-side",children:[e.jsxs("button",{className:"book-information-money",children:[e.jsx("div",{className:"book-price",children:s.price}),e.jsx("div",{className:"book-currency",children:"zł"})]}),e.jsxs("div",{className:"book-page-number",children:[s.pages," stron"]}),c&&s.userId===c.uid&&e.jsxs("div",{className:"book-down-button-container",children:[e.jsx("button",{className:"book-down-button",onClick:()=>h(s),children:"Edytuj"}),e.jsx("button",{className:"book-down-button",onClick:o,children:"Usuń"})]})]})]},s.id)}function E({book:s,onClose:h,onSave:l}){const[c,o]=i.useState(s.title),[r,d]=i.useState(s.author),[t,u]=i.useState(s.description),[x,p]=i.useState(s.price),[j,m]=i.useState(s.pages),[C,v]=i.useState(s.image),[n,b]=i.useState(s.coverType),k=async a=>{a.preventDefault();const f={title:c,author:r,description:t,price:x,pages:j,cover:"/witcher.jpg",coverType:n};o(""),d(""),u(""),p(""),m(""),b(""),v(null),l&&l(),h(),(async g=>{const w=L.currentUser;await A(F(S,"books",s.id),{...g,userId:w?w.uid:null})})(f)};return e.jsxs("div",{className:"main-container-form",children:[e.jsx("h1",{className:"view-header",children:"Dodawanie ogłoszenia"}),e.jsxs("form",{className:"add-parameters-container",onSubmit:k,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"book-add-title",className:"add-book-label",children:"Tytuł"}),e.jsx("input",{id:"book-add-title",className:"add-book-value",type:"text",value:c,onChange:a=>o(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"book-add-Author",className:"add-book-label",children:"Autor"}),e.jsx("input",{id:"book-add-Author",className:"add-book-value",type:"text",value:r,onChange:a=>d(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"book-add-description",className:"add-book-label",children:"Opis"}),e.jsx("input",{id:"book-add-description",className:"add-book-value",type:"text",value:t,onChange:a=>u(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"book-add-price",className:"add-book-label",children:"Cena"}),e.jsx("input",{id:"book-add-price",className:"add-book-value",type:"number",min:"0",value:x,onChange:a=>p(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"book-add-page-number",className:"add-book-label",children:"Liczba stron"}),e.jsx("input",{id:"book-add-page-number",className:"add-book-value",type:"number",min:"1",value:j,onChange:a=>m(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter-cover",className:"add-book-label",children:"Okładka"}),e.jsxs("select",{id:"filter-cover",className:"add-book-value",value:n,onChange:a=>b(a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Wybierz"}),e.jsx("option",{value:"soft",children:"Miękka"}),e.jsx("option",{value:"hard",children:"Twarda"})]})]}),e.jsxs("div",{className:"book-add-title",children:[e.jsx("label",{htmlFor:"image",className:"add-book-label",children:"Okładka książki:"}),e.jsx("input",{type:"file",className:"add-book-value",accept:"image/*",onChange:a=>v(a.target.files[0]),required:!0})]}),e.jsxs("div",{children:[e.jsx("button",{className:"cart-links",type:"submit",children:"Zaktualizuj książkę"}),e.jsx("button",{className:"cart-links",type:"button",onClick:h,children:"Anuluj"})]})]})]})}function P({books:s}){const{user:h,showMine:l,setShowMine:c,getBookList:o}=i.useContext(N),[r,d]=i.useState(null);return e.jsxs("div",{className:"book-list-container",children:[h&&e.jsx("button",{onClick:()=>c(t=>!t),children:l?"Pokaż wszystkie":"MOJE"}),s.map(t=>e.jsx(D,{book:t,onDelete:o,onEdit:d},t.id)),r&&e.jsx("div",{className:"modal-backdrop",onClick:()=>d(null),children:e.jsx("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:e.jsx(E,{book:r,onClose:()=>d(null),onSave:o})})})]})}function q({setPriceFilter:s,setCoverFilter:h,setPageCountFilter:l,setAuthorFilter:c,setDescriptionFilter:o}){const r=d=>{const{id:t,value:u}=d.target;t==="filter-price"&&s(u),t==="filter-cover"&&h(u),t==="filter-page-count"&&l(u),t==="filter-page-Author"&&c(u),t==="filter-page-desc"&&o(u)};return e.jsxs("div",{className:"filters-bar",children:[e.jsx("h2",{className:"filters-header",children:"Filtry"}),e.jsxs("div",{className:"filters-bar-filters",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter-price",className:"filters",children:"Cena"}),e.jsx("input",{id:"filter-price",className:"filters-value",type:"number",min:"0",onBlur:r})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter-cover",className:"filters",children:"Okładka"}),e.jsxs("select",{id:"filter-cover",className:"filters-value",onBlur:r,children:[e.jsx("option",{value:"",children:"Wybierz"}),e.jsx("option",{value:"soft",children:"Miękka"}),e.jsx("option",{value:"hard",children:"Twarda"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter-page-count",className:"filters",children:"Ilość stron"}),e.jsx("input",{id:"filter-page-count",className:"filters-value",type:"number",min:"1",onBlur:r})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter-page-Author",className:"filters",children:"Autor"}),e.jsx("input",{id:"filter-page-Author",className:"filters-value",type:"search",onBlur:r})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter-page-desc",className:"filters",children:"Zawarty w opisie"}),e.jsx("input",{id:"filter-page-desc",className:"filters-value",type:"text",onBlur:r})]})]})]})}function M(){return[{title:"LiBeer"},{name:"Opis",content:"Księgarnia internetowa"}]}const W=z(function(){const{booksList:h}=i.useContext(N),[l,c]=i.useState(""),[o,r]=i.useState(""),[d,t]=i.useState(""),[u,x]=i.useState(""),[p,j]=i.useState(""),[m,C]=i.useState(""),v=h.filter(n=>{const b=l===""||n.price<=l,k=o===""||n.coverType===o,a=d===""||n.pages<=d,f=u===""||n.author.toLowerCase().includes(u.toLowerCase()),y=p===""||n.description.toLowerCase().includes(p.toLowerCase()),g=n.title.toLowerCase().includes(m.toLowerCase())||n.author.toLowerCase().includes(m.toLowerCase());return b&&k&&a&&f&&y&&g});return e.jsxs("main",{children:[e.jsx("div",{className:"announcements-top-bar",children:e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"search",placeholder:"Szukasz jakiegoś tytułu?",value:m,onChange:n=>C(n.target.value)})})}),e.jsxs("div",{className:"main-container",children:[e.jsx(q,{setPriceFilter:c,setCoverFilter:r,setPageCountFilter:t,setAuthorFilter:x,setDescriptionFilter:j}),e.jsx(P,{books:v})]})]})});export{W as default,M as meta};
