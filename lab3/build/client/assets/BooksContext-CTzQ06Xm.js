import{a as s,o as h}from"./chunk-BAXFHI7N-DRA5_ntC.js";import{a as x,g as k,f as m,q as p,h as B,i as S}from"./firebase-DzgWOF0t.js";const b=s.createContext(),q=({children:i})=>{const[u,a]=s.useState([]),[o,d]=s.useState(!1),[e,f]=s.useState(null);s.useEffect(()=>{const t=x.onAuthStateChanged(f);return()=>t()},[]);const r=async()=>{try{let t=k(m,"books"),n=t;o&&e&&(n=p(t,B("userId","==",e.uid)));const l=(await S(n)).docs.map(c=>({id:c.id,...c.data()}));a(l)}catch(t){console.error(t)}};return s.useEffect(()=>{r()},[o,e]),h.jsx(b.Provider,{value:{booksList:u,setBooksList:a,showMine:o,setShowMine:d,user:e,getBookList:r},children:i})};export{q as B,b as a};
